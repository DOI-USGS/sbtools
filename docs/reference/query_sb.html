<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Generic SB query function to construct advanced queries.
The following is a list of query parameters you can use 
in the query_list parameter.

q (character): Query string
q (character): Lucene query string
fields (character): Character vector of fields to return
folderId (character): Alphanumeric string representing folder ID
parentId (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, but not within 
 sub-folders.
sort (character) One of "firstContact", "dateCreated", "lastUpdated", 
 or "title". By default sorted by search score
order (character) One of "asc" or "desc"
ids Vector of item ids.
ancestors (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, even within 
 sub-folders. Used as a filter
tags Filter by tags, e.g, "distribution". Used as a filter
browseCategory One of .... Used as a filter
browseType One of .... Used as a filter
dateRange A json string with keys dateType and choice. Where dateType is one of
 Acquisition, Award, Collected, dateCreated, Received, Reported, Transmitted, Due, End,
 Info, lastUpdated, Publication, Release, or Start. And where choice is one of 
 day, week, month, year, or range (if range selected, also supply start and end
 keys with dates of the form YYYY-MM-DD). Used as a filter
projectStatus One of Active, Approved, Completed, In Progress, Proposed. Used as a filter
spatialQuery A WKT string. Used as a filter
extentQuery Use existing extents (footprints) to search against item bounding 
 boxes and representational points. This is a alphanumeric string.

'><title>Query SB for items using generic query parameters — query_sb • sbtools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Query SB for items using generic query parameters — query_sb"><meta property="og:description" content='Generic SB query function to construct advanced queries.
The following is a list of query parameters you can use 
in the query_list parameter.

q (character): Query string
q (character): Lucene query string
fields (character): Character vector of fields to return
folderId (character): Alphanumeric string representing folder ID
parentId (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, but not within 
 sub-folders.
sort (character) One of "firstContact", "dateCreated", "lastUpdated", 
 or "title". By default sorted by search score
order (character) One of "asc" or "desc"
ids Vector of item ids.
ancestors (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, even within 
 sub-folders. Used as a filter
tags Filter by tags, e.g, "distribution". Used as a filter
browseCategory One of .... Used as a filter
browseType One of .... Used as a filter
dateRange A json string with keys dateType and choice. Where dateType is one of
 Acquisition, Award, Collected, dateCreated, Received, Reported, Transmitted, Due, End,
 Info, lastUpdated, Publication, Release, or Start. And where choice is one of 
 day, week, month, year, or range (if range selected, also supply start and end
 keys with dates of the form YYYY-MM-DD). Used as a filter
projectStatus One of Active, Approved, Completed, In Progress, Proposed. Used as a filter
spatialQuery A WKT string. Used as a filter
extentQuery Use existing extents (footprints) to search against item bounding 
 boxes and representational points. This is a alphanumeric string.

'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sbtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/sbtools.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DOI-USGS/sbtools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Query SB for items using generic query parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/DOI-USGS/sbtools/blob/HEAD/R/query_sb.R" class="external-link"><code>R/query_sb.R</code></a></small>
      <div class="d-none name"><code>query_sb.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generic SB query function to construct advanced queries.</p>
<p>The following is a list of query parameters you can use 
in the <code>query_list</code> parameter.</p>
<ul><li><p>q (character): Query string</p></li>
<li><p>q (character): Lucene query string</p></li>
<li><p>fields (character): Character vector of fields to return</p></li>
<li><p>folderId (character): Alphanumeric string representing folder ID</p></li>
<li><p>parentId (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, but not within 
 sub-folders.</p></li>
<li><p>sort (character) One of "firstContact", "dateCreated", "lastUpdated", 
 or "title". By default sorted by search score</p></li>
<li><p>order (character) One of "asc" or "desc"</p></li>
<li><p>ids Vector of item ids.</p></li>
<li><p>ancestors (character): Alphanumeric string representing folder ID. This
 can be used to return all children items within the folder, even within 
 sub-folders. Used as a filter</p></li>
<li><p>tags Filter by tags, e.g, "distribution". Used as a filter</p></li>
<li><p>browseCategory One of .... Used as a filter</p></li>
<li><p>browseType One of .... Used as a filter</p></li>
<li><p>dateRange A json string with keys dateType and choice. Where dateType is one of
 Acquisition, Award, Collected, dateCreated, Received, Reported, Transmitted, Due, End,
 Info, lastUpdated, Publication, Release, or Start. And where choice is one of 
 day, week, month, year, or range (if range selected, also supply start and end
 keys with dates of the form YYYY-MM-DD). Used as a filter</p></li>
<li><p>projectStatus One of Active, Approved, Completed, In Progress, Proposed. Used as a filter</p></li>
<li><p>spatialQuery A WKT string. Used as a filter</p></li>
<li><p>extentQuery Use existing extents (footprints) to search against item bounding 
 boxes and representational points. This is a alphanumeric string.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">query_sb</span><span class="op">(</span><span class="va">query_list</span>, <span class="va">...</span>, limit <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>query_list</dt>
<dd><p>List of item query selectors. See Details.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters are passed on to <code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></code></p></dd>


<dt>limit</dt>
<dd><p>Maximum number of returned items. Will do paging to retrieve
results when limit is over 1000. Use with caution, queries 10k results
are slow.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of <code><a href="sbitem.html">sbitem</a></code> objects</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="query_items.html">query_items</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"water"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Search by project status</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>projectStatus <span class="op">=</span> <span class="st">"Active"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Search a folder ID</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>q <span class="op">=</span> <span class="st">"water"</span>, folderId <span class="op">=</span> <span class="st">'504216b9e4b04b508bfd337d'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter by ancestor</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ancestors <span class="op">=</span> <span class="st">"4f831626e4b0e84f6086809b"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter by tags</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tags <span class="op">=</span> <span class="st">"distribution"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter by browse category</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>browseCategory <span class="op">=</span> <span class="st">"Image"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter by browse type</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>browseType <span class="op">=</span> <span class="st">"Map Service"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter by WKT geometry string</span></span></span>
<span class="r-in"><span><span class="va">wkt1</span> <span class="op">&lt;-</span> <span class="st">"POLYGON((-104.4 41.0,-95.1 41.0,-95.1 37.5,-104.4 37.5,-104.4 41.0))"</span></span></span>
<span class="r-in"><span><span class="va">wkt2</span> <span class="op">&lt;-</span> <span class="st">"POLYGON((-104.4 38.3,-95.2 38.3,-95.2 33.7,-104.4 34.0,-104.4 38.3))"</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>spatialQuery <span class="op">=</span> <span class="va">wkt1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>spatialQuery <span class="op">=</span> <span class="va">wkt1</span>, spatialQuery <span class="op">=</span> <span class="va">wkt2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Date range</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dateRange <span class="op">=</span> <span class="st">'{"dateType":"Collected","choice":"year"}'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dateRange <span class="op">=</span> <span class="st">'{"dateType":"lastUpdated","choice":"month"}'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">query_sb</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dateRange <span class="op">=</span> </span></span>
<span class="r-in"><span>    <span class="st">'{"dateType":"Release","choice":"range","start":"2014-09-01","end":"2015-09-01"}'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David Blodgett, Luke Winslow.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

